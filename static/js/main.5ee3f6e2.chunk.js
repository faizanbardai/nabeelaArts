(this["webpackJsonpnabeela-arts-fe"]=this["webpackJsonpnabeela-arts-fe"]||[]).push([[0],{118:function(e,t,a){e.exports=a(199)},123:function(e,t,a){},199:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c);a(123),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(16),u=a(69),i=a(15);function s(){return r.a.createElement("div",null)}var m=a(93),p=a.n(m),d=a(12),b=a.n(d),f=a(19),h="https://fayju-be.herokuapp.com/nabeelasArt",g=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/admin/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/admin/refresh-token",{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/art");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/art?active=1");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.imgbb.com/1/upload",{method:"POST",body:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/art",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(b.a.mark((function e(t,a,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/art/"+t,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify(a)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(b.a.mark((function e(t,a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(h+"/art/"+t,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer "+a}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();function k(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){j().then((function(e){return e.json()})).then((function(e){c(e)}))}),[]),r.a.createElement("div",{className:"container",style:{display:"block",width:"100%",overflow:"auto"}},r.a.createElement(p.a,{images:a}))}var S=function(){return r.a.createElement("div",null,r.a.createElement(s,null),r.a.createElement(k,null))},N=a(250),C=a(242),I=a(240),A=a(245),L=a(241),T=a(249),W=a(237),H=a(247),B=a(97),D=a.n(B),z=a(105),_=a(238),q=a(239);function F(){return r.a.createElement(z.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(W.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var G=Object(_.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function P(e){var t=G(),a=Object(n.useState)(""),c=Object(l.a)(a,2),o=c[0],u=c[1],i=Object(n.useState)(""),s=Object(l.a)(i,2),m=s[0],p=s[1],d=function(){var t=Object(f.a)(b.a.mark((function t(a){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,g({username:o,password:m});case 3:n=t.sent,t.t0=n.status,t.next=200===t.t0?7:401===t.t0?13:15;break;case 7:return t.next=9,n.json();case 9:return r=t.sent,localStorage.setItem("token",r.token),e.setIsLoggedIn(!0),t.abrupt("break",16);case 13:return localStorage.removeItem("token"),t.abrupt("break",16);case 15:console.log("Some error");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(q.a,{component:"main",maxWidth:"xs"},r.a.createElement(I.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(N.a,{className:t.avatar},r.a.createElement(D.a,null)),r.a.createElement(z.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:d},r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:o,onChange:function(e){return u(e.target.value)},autoComplete:"email",autoFocus:!0}),r.a.createElement(A.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:m,onChange:function(e){return p(e.target.value)},autoComplete:"current-password"}),r.a.createElement(L.a,{control:r.a.createElement(T.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(C.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Sign In"))),r.a.createElement(H.a,{mt:8},r.a.createElement(F,null)))}var U=a(74),J=a(246),R=a(248),Y=a(98),M=a.n(Y),V=a(99),$=a(100);function K(e){var t=Object(n.useState)(!1),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(),i=Object(l.a)(u,2),s=i[0],m=i[1],p=Object(n.useState)(!1),d=Object(l.a)(p,2),h=d[0],g=d[1],v=Object(n.useState)(""),E=Object(l.a)(v,2),j=E[0],k=E[1],S=Object(n.useState)(null),N=Object(l.a)(S,2),C=N[0],I=N[1],A=Object(n.useState)(""),L=Object(l.a)(A,2),T=L[0],W=L[1],H=Object(n.useState)(""),B=Object(l.a)(H,2),D=B[0],z=B[1],_=Object(n.useState)(!1),q=Object(l.a)(_,2),F=q[0],G=q[1],P=Object(n.useState)(null),U=Object(l.a)(P,2),Y=U[0],K=U[1],Q=function(){o(!1)},X=function(){o(!0)},Z=function(){var t=Object(f.a)(b.a.mark((function t(a){var n,r,c,o,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),g(!0),!e.art){t.next=11;break}return t.next=5,O(e.art._id,{caption:j,thumbnailWidth:T,thumbnailHeight:D},localStorage.getItem("token")).then((function(e){return e.json()}));case 5:n=t.sent,e.updateArt(n),Q(),g(!1),t.next=30;break;case 11:return(r=new FormData).append("key","c2a389ce6f580be4c419e46023526cce"),r.append("image",C),t.next=16,y(r);case 16:return c=t.sent,t.next=19,c.json();case 19:return o=t.sent,t.next=22,x({src:o.data.medium?o.data.medium.url:o.data.image.url,thumbnail:o.data.thumb.url,thumbnailWidth:T,thumbnailHeight:D,caption:j},localStorage.getItem("token"));case 22:return l=t.sent,t.next=25,l.json();case 25:u=t.sent,e.addNewArt(u),ee(),Q(),g(!1);case 30:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){m(),k(""),W(""),z(""),I(null),K(null)};return Object(n.useEffect)((function(){e.art&&(m(e.art._id),k(e.art.caption),z(e.art.thumbnailHeight),W(e.art.thumbnailWidth),K(e.art.src))}),[e.art]),r.a.createElement(r.a.Fragment,null,!e.art&&r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm rounded-pill mx-2",onClick:X},"Add new"),e.art&&r.a.createElement(V.a,{icon:$.a,size:"xs",onClick:X}),r.a.createElement(J.a,{size:"xl",show:c,onHide:Q,centered:!0},r.a.createElement(J.a.Header,{closeButton:!0},r.a.createElement(J.a.Title,null,e.art?j:"New Art")),r.a.createElement(J.a.Body,null,r.a.createElement("div",{className:"row"},Y&&r.a.createElement("div",{className:"col-12 col-md-6 d-flex justify-content-center"},r.a.createElement("div",{style:{display:"table-cell",width:"300px",height:"300px",verticalAlign:"middle"}},r.a.createElement("img",{alt:"art",style:{maxWidth:"100%",maxHeight:"100%",display:"block",margin:"0 auto"},src:Y}))),r.a.createElement("div",{className:Y?"col-12 col-md-6":"col-12"},r.a.createElement(R.a,{onSubmit:Z},!e.art&&r.a.createElement(R.a.Group,null,r.a.createElement(R.a.Control,{type:"file",required:!e.art,name:"picture",accept:"image/*",onChange:function(e){I(e.target.files[0]),K(URL.createObjectURL(e.target.files[0]))}})),r.a.createElement(R.a.Group,null,r.a.createElement(R.a.Control,{type:"text",value:j,name:"title",disabled:h,required:!0,onChange:function(e){return k(e.target.value)},placeholder:"Title"})),r.a.createElement(R.a.Group,null,r.a.createElement(R.a.Control,{type:"text",value:D,name:"thumbnailHeight",required:!0,disabled:h,onChange:function(e){return z(e.target.value)},placeholder:"Height"})),r.a.createElement(R.a.Group,null,r.a.createElement(R.a.Control,{type:"text",value:T,name:"thumbnailWidth",required:!0,disabled:h,onChange:function(e){return W(e.target.value)},placeholder:"Width"})),r.a.createElement("div",{className:"d-flex justify-content-between"},e.art&&(F?r.a.createElement("button",{type:"button",onClick:function(){var t=w(s,localStorage.getItem("token")).then((function(e){return e.json()}));e.removeArt(t),Q()},className:"btn btn-outline-danger"},"Sure?"):r.a.createElement("button",{type:"button",onClick:function(){return G(!0)},className:"btn btn-outline-danger"},"Delete")),h?r.a.createElement("button",{variant:"btn btn-secondary",disabled:!0},r.a.createElement("div",{className:"d-flex"},r.a.createElement(M.a,{type:"Puff",color:"blue",height:10,width:10}),r.a.createElement("div",null,"-- Loading"))):r.a.createElement(r.a.Fragment,null,e.art&&r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Update"),!e.art&&r.a.createElement("button",{className:"btn btn-primary",type:"submit"},"Save")))))))))}function Q(e){var t=Object(n.useState)([]),a=Object(l.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)([]),i=Object(l.a)(u,2),s=i[0],m=i[1],p=Object(n.useState)(""),d=Object(l.a)(p,2),b=d[0],f=d[1];Object(n.useEffect)((function(){E().then((function(e){return e.json()})).then((function(e){o(e),m(e)}))}),[]);var h=function(e){var t=s.map((function(t){return t._id===e._id?e:t}));m(t),o(t)},g=function(e){m(s.filter((function(t){return t._id===e._id})))};return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"py-2 d-flex justify-content-between"},r.a.createElement("form",{className:"flex-grow-1"},r.a.createElement("input",{className:"form-control rounded-pill py-0",autoFocus:!0,type:"search",value:b,onChange:function(e){e.preventDefault(),f(e.target.value),e.target.value.length>0?m(c.filter((function(t){return t.caption.toLowerCase().includes(e.target.value.toLowerCase())}))):m(c)},placeholder:"Search Art"})),r.a.createElement(K,{addNewArt:function(e){f(""),m([e].concat(Object(U.a)(s))),o([e].concat(Object(U.a)(c)))}})),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table table-borderless table-sm "},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Title"),r.a.createElement("th",{scope:"col",className:"text-right d-none d-md-block"},"H x W"),r.a.createElement("th",{scope:"col"},"Update"))),r.a.createElement("tbody",null,s.map((function(e,t){return r.a.createElement("tr",{key:e._id},r.a.createElement("th",{scope:"row"},t+1),r.a.createElement("td",null,e.caption),r.a.createElement("td",{className:"text-right d-none d-md-block"},e.thumbnailHeight," x ",e.thumbnailWidth),r.a.createElement("td",null,r.a.createElement(K,{art:e,updateArt:h,removeArt:g})))}))))),r.a.createElement("div",null,r.a.createElement("nav",{class:"navbar fixed-bottom navbar-light bg-light"},r.a.createElement("button",{type:"button",className:"btn btn-danger btn-sm btn-block rounded-pill",onClick:function(){localStorage.removeItem("token"),e.setIsLoggedIn(!1)}},"Logout"))))}function X(e){var t=e.isLoggedIn,a=e.setIsLoggedIn;Object(n.useEffect)((function(){c()}),[]);var c=function(){var e=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=17;break}return e.next=3,v(localStorage.getItem("token"));case 3:t=e.sent,e.t0=t.status,e.next=200===e.t0?7:401===e.t0?13:16;break;case 7:return e.next=9,t.json();case 9:return n=e.sent,localStorage.setItem("token",n.token),a(!0),e.abrupt("break",17);case 13:return localStorage.removeItem("token"),alert("Unauthorized or token expired"),e.abrupt("break",17);case 16:console.log("Some error");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,t?r.a.createElement(Q,{setIsLoggedIn:a}):r.a.createElement(P,{setIsLoggedIn:a}))}var Z=a(243),ee=a(244),te=Object(_.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),ae=Object(i.f)((function(e){var t=te(),a=function(t){e.history.push(t)};return r.a.createElement(Z.a,{position:"static"},r.a.createElement(ee.a,null,r.a.createElement(z.a,{variant:"h6",className:t.title,onClick:function(){return a("/")}},"Nabeela's Art"),r.a.createElement(C.a,{color:"inherit",onClick:function(){return a("/admin")}},"Admin")))}));function ne(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(u.a,{basename:"/nabeelaArts"},r.a.createElement(ae,null),r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/admin"},r.a.createElement(X,{isLoggedIn:a,setIsLoggedIn:c})),r.a.createElement(i.a,{path:"/",exact:!0},r.a.createElement(S,null)))))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.5ee3f6e2.chunk.js.map